<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>축하합니다 짤 생성기</title>
  <meta name='description' content='- 아무 이유 없음 -' />
  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://congrats.rwe.kr">
  <meta property="og:type" content="website">
  <meta property="og:title" content="축하합니다 짤 생성기">
  <meta property="og:description" content="- 아무 이유 없음 -">
  <meta property="og:image" content="https://congrats.rwe.kr/static/thumbnail.png">
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="congrats.rwe.kr">
  <meta property="twitter:url" content="https://congrats.rwe.kr">
  <meta name="twitter:title" content="축하합니다 짤 생성기">
  <meta name="twitter:description" content="- 아무 이유 없음 -">
  <meta name="twitter:image" content="https://congrats.rwe.kr/static/thumbnail.png">
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelector('form').addEventListener('submit', (event) => {
        event.preventDefault();
      });
    });
    document.addEventListener("DOMContentLoaded", () => {
      let input = document.getElementById('floating-input');
      input.addEventListener('input', () => {
        if (input.value.length > 4) {
          input.classList.add('is-invalid');
          input.value = input.value.slice(0, 4);
        } else {
          input.classList.remove('is-invalid');
        }

        if (input.value.length === 0) {
          let canvas = document.getElementById('canvas');
          let context = canvas.getContext('2d');
          context.transform(1, 0.025, 0, 1, -70, -10);
          context.clearRect(-10, -10, canvas.width + 10, canvas.height + 10);
          return;
        }

        let sliced = input.value.slice(0, 4);

        let context = document.getElementById('canvas').getContext('2d');
        let image = new Image();
        image.src = "./static/congrats.png";

        image.onload = (() => {
          canvas.width = 1024;
          canvas.height = image.height * (1024 / image.width);
          context.drawImage(image, 0, 0, 1024, image.height * (1024 / image.width));
          
          if (input.value.length === 1) {
            context.font = 'bold 46px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 70, 9);
            context.fillText(input.value[0], 300, 250);
          } else if (input.value.length === 2) {
            context.font = 'bold 44px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 40, 9);
            context.fillText(input.value[0], 300, 250);
            context.font = 'bold 48px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 70, 8);
            context.fillText(input.value[1], 300, 250);
          } else if (input.value.length === 3) {
            context.font = 'bold 42px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 0, 10);
            context.fillText(input.value[0], 300, 250);
            context.font = 'bold 46px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 70, 9);
            context.fillText(input.value[1], 300, 250);
            context.font = 'bold 48px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 76, 9);
            context.fillText(input.value[2], 300, 250);
          } else if (input.value.length === 4) {
            context.font = 'bold 40px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, -30, 10);
            context.fillText(input.value[0], 300, 250);
            context.font = 'bold 42px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 70, 9);
            context.fillText(input.value[1], 300, 250);
            context.font = 'bold 46px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 72, 9);
            context.fillText(input.value[2], 300, 250);
            context.font = 'bold 48px gungsuh';
            context.fillStyle = '#101010';
            context.transform(1, -0.025, 0, 1, 76, 12);
            context.fillText(input.value[3], 300, 250);
          }
        });
      });
    });
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
  <div class="container">
    <h2 class="mt-3 mb-3">🎉 축하합니다 짤 생성기 🎉</h2>
    <div class="alert alert-secondary" role="alert">
      · 궁서 폰트가 없으면 다른 폰트로 보일 수 있습니다.<br>
      · 우클릭 혹은 롱터치 후 이미지를 저장하세요.
    </div>
    <form class="form-floating mt-3 mb-3">
      <input type="text" class="form-control" id="floating-input" placeholder="김형식" value="">
      <label for="floating-input">이름 (4글자까지 가능)</label>
    </form>
    <div class="row">
      <canvas id="canvas"></canvas>
    </div>
  
    <footer>
      <small>
        Made by gwanryo · <a href="https://github.com/gwanryo" target="_blank">GitHub</a> · <a href="https://www.fmkorea.com/best/2594426530" target="_blank">Source</a>
      </small>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

</html>